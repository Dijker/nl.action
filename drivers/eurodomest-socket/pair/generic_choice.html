<script>
var options = {
	template: '../lib/pair/choice.html',
	id: 'generic_choice',
	title: 'pair.begin',
	buttons: [{
		name: 'pair.copy_remote',
		view: 'generic_imitate'
	}, {
		name: 'pair.create_signal',
		view: 'generic_program'
	}],
	svg: '<svg></svg>',
	body: 'pair.choice.body',
	svgWidth: '80vw',
	svgHeight: '65vh'
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/svgstyle.css" rel="stylesheet" type="text/css"/>
<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div>
	<div id="image-container"></div>
	<div id="button-container"></div>
	<div id="body"><span class="content"></span></div>
</div>

<script>
	var idPrefix = '[data-id="' + options.id + '"] ';
	$(idPrefix + '#body > span').html(__(options.body));
	var $imageContainer = $(idPrefix + '#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $buttonContainer = $(idPrefix + '#button-container');

	$imageContainer.html(options.svg);
	options.buttons.forEach(function (button) {
		$buttonContainer.append(
			$('<button>')
				.addClass('button')
				.html(__(button.name))
				.on('click', Homey.showView.bind(Homey, button.view))
		);
	});
</script>

<style>
	#body {
		position: absolute;
		bottom: 0;
		height: 20vh;
		text-align: center;
		font-size: 4vh;
		width: 100%;
	}

	#image-container {
		display: flex;
		align-items: center;
		justify-content: center;
		margin: auto;
		height: 65vh;
		width: 80vw;
	}

	#image-container svg {
		width: 100%;
		height: 100%;
	}

	#button-container {
		text-align: center;
	}

	#button-container > button {
		display: inline-block;
		margin: 0 10px;
	}
</style>